# GeoLite2-Go
GeoLite2 Integration Demo

# Общая структура проекта
Архитектурно всё максимально плоско так как нет никаких достаточно больших логически связных фрагментов которые стоит выделять в отдельные модули.

log.Println отправляют вывод в cli и как следствие отображаются в логах докера, что в целом удобно в любых обстоятельствах.

# Зависимости
Учитывая простоту проекта постарался свести зависимости к минимуму. Стандартный роутер из net/http более чем достаточен.

### Модуль `github.com/bradfitz/gomemcache`
Очевидных аналогов в репозитории Go не нашлось. Библиотека имеет встроенный mutex для синхронизации запросов и избегания race-conditions и в целом выглядит хорошо написанной. Не вижу смысла пытаться написать руками.

### Модуль `github.com/joho/godotenv`
Упрощает работу с .env файлами. В целом вариантов работы с env много: можно было подгружать напрямую в контейнер глобально, можно указать в Dockerfile или docker-compose.yml, можно было вручную читать .env файл. Дело привычки.

### Модуль `github.com/oschwald/geoip2-golang`
Выглядит как единственная опция для работы с файлами баз данных GeoIP2. Оно работает, разрабатывать свой Reader для mmdb файлов выглядит излишним на данном этапе.

### Остальное
Остальные модули являются непрямыми зависимостями от описанных выше.

# Контейнер

Это простой контейнер для разработки, рестарт контейнера пересобирает исходники посредством bash-скриптов и утилиты runit. Для деплоймента следует использовать runtime контейнер в который зашивает уже скомпилированный файл и зависимости.

Утилита runit позволяет запускать несколько сервисов и держать их более или менее живыми. По-верх стоит ещё делать health check на уровне Dockerfile, но опять же - это контейнер для разработки. 